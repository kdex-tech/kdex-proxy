var t;
!function(t2) {
  t2.Pop = "POP", t2.Push = "PUSH", t2.Replace = "REPLACE";
}(t || (t = {}));
function e(e2 = {}) {
  let { window: n2 = document.defaultView } = e2, a2 = n2.history;
  function r2() {
    let { pathname: t2, search: e3, hash: r3 } = n2.location, l2 = a2.state || {};
    return [l2.idx, { pathname: t2, search: e3, hash: r3, state: l2.usr || null, key: l2.key || "default" }];
  }
  let s = null;
  n2.addEventListener("popstate", function() {
    if (s) d.call(s), s = null;
    else {
      let e3 = t.Pop, [n3, a3] = r2();
      if (d.length) {
        if (null != n3) {
          let t2 = f - n3;
          t2 && (s = { action: e3, location: a3, retry() {
            P(-1 * t2);
          } }, P(t2));
        }
      } else O(e3);
    }
  });
  let h = t.Pop, [f, p] = r2(), g = i(), d = i();
  function b(t2) {
    return "string" == typeof t2 ? t2 : c(t2);
  }
  function y(t2, e3 = null) {
    return Object.assign(Object.assign({ pathname: p.pathname, hash: "", search: "" }, "string" == typeof t2 ? u(t2) : t2), { state: e3, key: o() });
  }
  function m(t2, e3) {
    return [{ usr: t2.state, key: t2.key, idx: e3 }, b(t2)];
  }
  function k(t2, e3, n3) {
    return !d.length || (d.call({ action: t2, location: e3, retry: n3 }), false);
  }
  function O(t2) {
    h = t2, [f, p] = r2(), g.call({ action: h, location: p });
  }
  function P(t2) {
    a2.go(t2);
  }
  return null == f && (f = 0, a2.replaceState(Object.assign(Object.assign({}, a2.state), { idx: f }), "")), { get action() {
    return h;
  }, get location() {
    return p;
  }, createHref: b, push: function e3(r3, l2) {
    let i2 = t.Push, o2 = y(r3, l2);
    if (k(i2, o2, function() {
      e3(r3, l2);
    })) {
      let [t2, e4] = m(o2, f + 1);
      try {
        a2.pushState(t2, "", e4);
      } catch (c2) {
        n2.location.assign(e4);
      }
      O(i2);
    }
  }, replace: function e3(n3, r3) {
    let l2 = t.Replace, i2 = y(n3, r3);
    if (k(l2, i2, function() {
      e3(n3, r3);
    })) {
      let [t2, e4] = m(i2, f);
      a2.replaceState(t2, "", e4), O(l2);
    }
  }, go: P, back() {
    P(-1);
  }, forward() {
    P(1);
  }, listen: (t2) => g.push(t2), block(t2) {
    let e3 = d.push(t2);
    return 1 === d.length && n2.addEventListener("beforeunload", l), function() {
      e3(), d.length || n2.removeEventListener("beforeunload", l);
    };
  } };
}
function n(e2 = {}) {
  let { window: n2 = document.defaultView } = e2, a2 = n2.history;
  function r2() {
    let { pathname: t2 = "/", search: e3 = "", hash: r3 = "" } = u(n2.location.hash.substr(1)), l2 = a2.state || {};
    return [l2.idx, { pathname: t2, search: e3, hash: r3, state: l2.usr || null, key: l2.key || "default" }];
  }
  let s = null;
  function h() {
    if (s) b.call(s), s = null;
    else {
      let e3 = t.Pop, [n3, a3] = r2();
      if (b.length) {
        if (null != n3) {
          let t2 = p - n3;
          t2 && (s = { action: e3, location: a3, retry() {
            x(-1 * t2);
          } }, x(t2));
        }
      } else P(e3);
    }
  }
  n2.addEventListener("popstate", h), n2.addEventListener("hashchange", () => {
    let [, t2] = r2();
    c(t2) !== c(g) && h();
  });
  let f = t.Pop, [p, g] = r2(), d = i(), b = i();
  function y(t2) {
    return function() {
      let t3 = document.querySelector("base"), e3 = "";
      if (t3 && t3.getAttribute("href")) {
        let t4 = n2.location.href, a3 = t4.indexOf("#");
        e3 = -1 === a3 ? t4 : t4.slice(0, a3);
      }
      return e3;
    }() + "#" + ("string" == typeof t2 ? t2 : c(t2));
  }
  function m(t2, e3 = null) {
    return Object.assign(Object.assign({ pathname: g.pathname, hash: "", search: "" }, "string" == typeof t2 ? u(t2) : t2), { state: e3, key: o() });
  }
  function k(t2, e3) {
    return [{ usr: t2.state, key: t2.key, idx: e3 }, y(t2)];
  }
  function O(t2, e3, n3) {
    return !b.length || (b.call({ action: t2, location: e3, retry: n3 }), false);
  }
  function P(t2) {
    f = t2, [p, g] = r2(), d.call({ action: f, location: g });
  }
  function x(t2) {
    a2.go(t2);
  }
  return null == p && (p = 0, a2.replaceState(Object.assign(Object.assign({}, a2.state), { idx: p }), "")), { get action() {
    return f;
  }, get location() {
    return g;
  }, createHref: y, push: function e3(r3, l2) {
    let i2 = t.Push, o2 = m(r3, l2);
    if (O(i2, o2, function() {
      e3(r3, l2);
    })) {
      let [t2, e4] = k(o2, p + 1);
      try {
        a2.pushState(t2, "", e4);
      } catch (c2) {
        n2.location.assign(e4);
      }
      P(i2);
    }
  }, replace: function e3(n3, r3) {
    let l2 = t.Replace, i2 = m(n3, r3);
    if (O(l2, i2, function() {
      e3(n3, r3);
    })) {
      let [t2, e4] = k(i2, p);
      a2.replaceState(t2, "", e4), P(l2);
    }
  }, go: x, back() {
    x(-1);
  }, forward() {
    x(1);
  }, listen: (t2) => d.push(t2), block(t2) {
    let e3 = b.push(t2);
    return 1 === b.length && n2.addEventListener("beforeunload", l), function() {
      e3(), b.length || n2.removeEventListener("beforeunload", l);
    };
  } };
}
function a(e2 = {}) {
  let { initialEntries: n2 = ["/"], initialIndex: a2 } = e2, l2 = n2.map((t2) => Object.assign({ pathname: "/", search: "", hash: "", state: null, key: o() }, "string" == typeof t2 ? u(t2) : t2)), s = r(null == a2 ? l2.length - 1 : a2, 0, l2.length - 1), h = t.Pop, f = l2[s], p = i(), g = i();
  function d(t2, e3 = null) {
    return Object.assign(Object.assign({ pathname: f.pathname, search: "", hash: "" }, "string" == typeof t2 ? u(t2) : t2), { state: e3, key: o() });
  }
  function b(t2, e3, n3) {
    return !g.length || (g.call({ action: t2, location: e3, retry: n3 }), false);
  }
  function y(t2, e3) {
    h = t2, f = e3, p.call({ action: h, location: f });
  }
  function m(e3) {
    let n3 = r(s + e3, 0, l2.length - 1), a3 = t.Pop, i2 = l2[n3];
    b(a3, i2, function() {
      m(e3);
    }) && (s = n3, y(a3, i2));
  }
  return { get index() {
    return s;
  }, get action() {
    return h;
  }, get location() {
    return f;
  }, createHref: function(t2) {
    return "string" == typeof t2 ? t2 : c(t2);
  }, push: function e3(n3, a3) {
    let r2 = t.Push, i2 = d(n3, a3);
    b(r2, i2, function() {
      e3(n3, a3);
    }) && (s += 1, l2.splice(s, l2.length, i2), y(r2, i2));
  }, replace: function e3(n3, a3) {
    let r2 = t.Replace, i2 = d(n3, a3);
    b(r2, i2, function() {
      e3(n3, a3);
    }) && (l2[s] = i2, y(r2, i2));
  }, go: m, back() {
    m(-1);
  }, forward() {
    m(1);
  }, listen: (t2) => p.push(t2), block: (t2) => g.push(t2) };
}
function r(t2, e2, n2) {
  return Math.min(Math.max(t2, e2), n2);
}
function l(t2) {
  t2.preventDefault(), t2.returnValue = "";
}
function i() {
  let t2 = [];
  return { get length() {
    return t2.length;
  }, push: (e2) => (t2.push(e2), function() {
    t2 = t2.filter((t3) => t3 !== e2);
  }), call(e2) {
    t2.forEach((t3) => t3 && t3(e2));
  } };
}
function o() {
  return Math.random().toString(36).substr(2, 8);
}
function c({ pathname: t2 = "/", search: e2 = "", hash: n2 = "" }) {
  return e2 && "?" !== e2 && (t2 += "?" === e2.charAt(0) ? e2 : "?" + e2), n2 && "#" !== n2 && (t2 += "#" === n2.charAt(0) ? n2 : "#" + n2), t2;
}
function u(t2) {
  let e2 = {};
  if (t2) {
    let n2 = t2.indexOf("#");
    n2 >= 0 && (e2.hash = t2.substr(n2), t2 = t2.substr(0, n2));
    let a2 = t2.indexOf("?");
    a2 >= 0 && (e2.search = t2.substr(a2), t2 = t2.substr(0, a2)), t2 && (e2.pathname = t2);
  }
  return e2;
}
export { t as Action, e as createBrowserHistory, n as createHashHistory, a as createMemoryHistory, c as createPath, u as parsePath };
